# templates/django_onpremweb.conf.j2

WSGIDaemonProcess {{ apache_wsgi_daemon_name }} user={{ apache_user }} group={{ apache_group }} python-home={{ venv_dir }} python-path={{ project_root_dir }} threads=5

<VirtualHost *:80>
    ServerName {{ server_name_ip }}
    {% if server_alias_domain is defined and server_alias_domain %}
    ServerAlias {{ server_alias_domain }}
    {% endif %}

    ErrorLog {{ apache_log_dir }}/{{ django_project_name }}-error.log
    CustomLog {{ apache_log_dir }}/{{ django_project_name }}-access.log combined

    WSGIScriptAlias / {{ project_root_dir }}/{{ django_project_config_name }}/wsgi.py
    WSGIProcessGroup {{ apache_wsgi_daemon_name }}
    WSGIApplicationGroup %{GLOBAL}

    <Directory {{ project_root_dir }}/{{ django_project_config_name }}>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    Alias /static/ {{ project_root_dir }}/staticfiles/
    <Directory {{ project_root_dir }}/staticfiles>
        Require all granted
    </Directory>

    Alias /media/ {{ project_root_dir }}/mediafiles/
    <Directory {{ project_root_dir }}/mediafiles>
        Require all granted
    </Directory>
</VirtualHost>
